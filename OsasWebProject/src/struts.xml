<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>

	<constant name="struts.devMode" value="true" />

	<package name="helloworld" extends="struts-default">
	
		<interceptors>
			<interceptor name="userSessionInterceptor" class="org.pup.system.osas.ui.interceptor.UserSessionInterceptor"></interceptor>
			<interceptor name="firstTimeLoginInterceptor" class="org.pup.system.osas.ui.interceptor.FirstTimeLoginInterceptor"></interceptor>
			<interceptor-stack name="userSessionStack">
			    <interceptor-ref name="timer" /> 
            	<interceptor-ref name="logger" /> 
            	<interceptor-ref name="defaultStack" /> 
				<interceptor-ref name="userSessionInterceptor"/>
				<interceptor-ref name="firstTimeLoginInterceptor"/>
			</interceptor-stack>
		</interceptors>

		<default-action-ref name="login" />
		
		<global-results>
   			<result name="redirectToLogin" type="redirect">/login</result>
   			<result name="redirectToHome" type="redirect">/home</result>
   			<result name="redirectToFirstTimeLogin" type="redirect">/displayFirstTimeLogin</result>
   			<result name="redirectToPasswordReset" type="redirect">/displayPasswordReset</result>
  		</global-results>
		
		<action name="hello" class="org.pup.system.osas.ui.action.HelloWorldAction">
			<result name="success">/jsp/helloWorld.jsp</result>
		</action>
		
		<action name="login" class="org.pup.system.osas.ui.action.LoginAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/login.jsp</result>
		</action>
		
		<action name="logout" class="org.pup.system.osas.ui.action.LogoutAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">login</result>
		</action>
		
		<action name="processLogin" class="org.pup.system.osas.ui.action.ProcessLoginAction">
			<interceptor-ref name="userSessionStack"/>
			<result type="chain" name="success">home</result>
			<result name="error">/jsp/login.jsp</result>
		</action>
		
		<action name="home" class="org.pup.system.osas.ui.action.HomeAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/home.jsp</result>
		</action>
		
		<action name="displayUserList" class="org.pup.system.osas.ui.action.DisplayUserListAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/userList.jsp</result>
			<result name="error">/jsp/userList.jsp</result>
		</action>
		
		<action name="searchUser" class="org.pup.system.osas.ui.action.SearchUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/userList.jsp</result>
			<result name="error">/jsp/userList.jsp</result>
		</action>
		
		<action name="deleteUser" class="org.pup.system.osas.ui.action.DeleteUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">displayUserList</result>	
			<result name="error" type="chain">displayUserList</result>
		</action>
		
		<action name="resetPassword" class="org.pup.system.osas.ui.action.ResetPasswordAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">displayUserList</result>	
			<result name="error" type="chain">displayUserList</result>
		</action>
		
		<action name="displayChangePassword" class="org.pup.system.osas.ui.action.DisplayChangePasswordAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/changePassword.jsp</result>
		</action>
		
		<action name="displayFirstTimeLogin" class="org.pup.system.osas.ui.action.DisplayFirstTimeLoginAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/firstTimeLogin.jsp</result>
		</action>
		
		<action name="displayPasswordReset" class="org.pup.system.osas.ui.action.DisplayPasswordResetAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/passwordReset.jsp</result>
		</action>
		
		<action name="changePassword" class="org.pup.system.osas.ui.action.ChangePasswordAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">home</result>
			<result name="error">/jsp/changePassword.jsp</result>
		</action>
		
		<action name="firstTimeLogin" class="org.pup.system.osas.ui.action.FirstTimeLoginAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">displayFirstTimeLogin</result>
		</action>
		
		<action name="passwordReset" class="org.pup.system.osas.ui.action.PasswordResetAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">displayPasswordReset</result>
		</action>
		
		<action name="displayAddUser" class="org.pup.system.osas.ui.action.DisplayAddUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/addUser.jsp</result>
		</action>
		
		<action name="addUser" class="org.pup.system.osas.ui.action.AddUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">displayUserList</result>
			<result name="error">/jsp/addUser.jsp</result>
		</action>
		<action name="displayUserList" class="org.pup.system.osas.ui.action.DisplayUserListAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/userList.jsp</result>
			<result name="error">/jsp/userList.jsp</result>
		</action>
		
		<action name="displayAgencyList" class="org.pup.system.osas.ui.action.DisplayAgencyListAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/agencyList.jsp</result>
		</action>
		
		<action name="addAgency" class="org.pup.system.osas.ui.action.AddAgencyAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">displayAgencyList</result>
			<result name="error"  type="chain">/jsp/addAgency.jsp</result>
		</action>
		
		<action name="displayAddAgency" class="org.pup.system.osas.ui.action.DisplayAddAgencyAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/addAgency.jsp</result>
		</action>
		
		<action name="displayEditUser" class="org.pup.system.osas.ui.action.DisplayEditUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/editUser.jsp</result>
			<result name="error" type="chain">displayUserList</result>
		</action>
		
		<action name="editUser" class="org.pup.system.osas.ui.action.EditUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result type="chain" name="success">displayUserList</result>
			<result type="chain" name="error">displayUserList</result>
		</action>
		
		<action name="displayEditAgency" class="org.pup.system.osas.ui.action.DisplayEditAgencyAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/editAgency.jsp</result>
			<result name="error" type="chain">home</result>
		</action>
		
		<action name="searchAgency" class="org.pup.system.osas.ui.action.SearchAgencyAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/agencyList.jsp</result>
			<result name="error">/jsp/agencyList.jsp</result>
		</action>
		
		<action name="deleteAgency" class="org.pup.system.osas.ui.action.DeleteAgencyAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">displayAgencyList</result>	
			<result name="error" type="chain">displayAgencyList</result>
		</action>
		
		
		<action name="editAgency" class="org.pup.system.osas.ui.action.EditAgencyAction">
			<interceptor-ref name="userSessionStack"/>
			<result type="chain" name="success">displayAgencyList</result>
			<result type="chain" name="error">displayAgencyList</result>
		</action>
		
		<action name="uploadTest" class="org.pup.system.osas.ui.action.UploadTestAction">
			<result name="success">/testjsp/upload.jsp</result>
		</action>
		
		<action name="displayUploadTest">
			<result name="success">/testjsp/displayupload.jsp</result>
		</action>
	</package>

</struts>	