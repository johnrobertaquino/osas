<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>

	<constant name="struts.devMode" value="true" />

	<package name="helloworld" extends="struts-default">
	
		<interceptors>
			<interceptor name="userSessionInterceptor" class="org.pup.system.osas.ui.interceptor.UserSessionInterceptor"></interceptor>
			<interceptor-stack name="userSessionStack">
			    <interceptor-ref name="timer" /> 
            	<interceptor-ref name="logger" /> 
            	<interceptor-ref name="defaultStack" /> 
				<interceptor-ref name="userSessionInterceptor"/>
			</interceptor-stack>
		</interceptors>

		<default-action-ref name="login" />
		
		<global-results>
   			<result name="redirectToLogin" type="redirect">/login</result>
   			<result name="redirectToHome" type="redirect">/home</result>
  		</global-results>
		
		<action name="hello" class="org.pup.system.osas.ui.action.HelloWorldAction">
			<result name="success">/jsp/helloWorld.jsp</result>
		</action>
		
		<action name="login" class="org.pup.system.osas.ui.action.LoginAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/login.jsp</result>
		</action>
		
		<action name="logout" class="org.pup.system.osas.ui.action.LogoutAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">login</result>
		</action>
		
		<action name="processLogin" class="org.pup.system.osas.ui.action.ProcessLoginAction">
			<interceptor-ref name="userSessionStack"/>
			<result type="chain" name="success">home</result>
			<result name="error">/jsp/login.jsp</result>
		</action>
		
		<action name="home" class="org.pup.system.osas.ui.action.HomeAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/home.jsp</result>
		</action>
		
		<action name="displayUserList" class="org.pup.system.osas.ui.action.DisplayUserListAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/userList.jsp</result>
			<result name="error">/jsp/userList.jsp</result>
		</action>
		
		<action name="searchUser" class="org.pup.system.osas.ui.action.SearchUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success">/jsp/userList.jsp</result>
			<result name="error">/jsp/userList.jsp</result>
		</action>
		
		<action name="deleteUser" class="org.pup.system.osas.ui.action.DeleteUserAction">
			<interceptor-ref name="userSessionStack"/>
			<result name="success" type="chain">displayUserList</result>	
			<result name="error" type="chain">displayUserList</result>
		</action>
		
		<action name="displayChangePassword" class="org.pup.system.osas.ui.action.DisplayChangePasswordAction">
			<result name="success">/jsp/changePassword.jsp</result>
		</action>
		
		<action name="changePassword" class="org.pup.system.osas.ui.action.ChangePasswordAction">
			<result name="success" type="chain">home</result>
			<result name="error">/jsp/changePassword.jsp</result>
		</action>
		
		<action name="addUser" class="org.pup.system.osas.ui.action.AddUserAction">
			<result name="success">/jsp/addUser.jsp</result>
		</action>
	</package>

</struts>	